$(function(){function t(t){return t.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(e,o){void 0===e&&(e={}),void 0===o&&(o={});var n,i={};for(n in e)i[n]=e[n];1==i.heading&&(i.heading="h1");var s={get data(){var t,e=this.filename.lastIndexOf(".");t=e>0?this.filename.substring(0,e):this.filename;var o={toString:function(){return t}};return["model","prob","class","acc","auc"].forEach(function(e){o[e]=t+"."+e}),["train","test"].forEach(function(e){o[e]={toString:function(){return t+"."+e}},o[e].model=t+".model",["prob","class","acc","auc"].forEach(function(n){o[e][n]=t+"."+e+"."+n})}),o},get needSplit(){return this.splitRatio>0&&this.splitRatio<1},get needProb(){return this.threshold>0&&this.threshold<1},get y(){var t=this.formula.indexOf("~");return t>=0?this.formula.substring(0,t):this.formula},get rhs(){var t=this.formula.indexOf("~");return t>=0?this.formula.substring(t+1):this.formula},toJSON:function(){var t={};return this.userOptionNames.forEach(function(e){t[e]=this[e]},this),t},reset:function(){this.filename="data.csv",this.postprocess="",this.splitSeed="123",this.splitRatio="0.7",this.formula="y~.",this.threshold="0.5",this.forestSeed="456"},userOptionNames:["filename","postprocess","formula","splitSeed","splitRatio","threshold","forestSeed"]};s.reset();for(n in o)s[n]=o[n];return{html:i,code:s,i18n:a.get(i.lang),encode:t}}function o(t){var e=[r,c,p,d],o=e.map(function(e){return new e(t)});return"<table><tr>"+o.map(function(e){return"<th>"+t.i18n(e.getNameId())+"</th>"}).join("")+"</tr><tr>"+o.map(function(t){return"<td><code><pre>"+t.generateCode()+"</pre></code></td>"}).join("")+"</tr></table>"}function n(e){return""+(e.html.heading?"<"+e.html.heading+">"+e.i18n("Binary classification")+"</"+e.html.heading+">":"")+"<div class='code-options'>"+e.code.userOptionNames.map(function(o){return"<div class='code-input' data-option='"+o+"'><span class='label'"+("splitRatio"==o||"threshold"==o?" title='"+e.i18n("options.code."+o+".title")+"'":"")+">"+e.i18n("options.code."+o)+":</span> <code>"+t(e.code[o])+"</code></div>"}).join("")+"</div>"+o(e)}function i(){return"statistics-classification-binary-id-"+l++}var a={data:{}};a.get=function(t){var e="en";return t=t||e,t=t.split("-")[0],function(o){var n=a.data[t][o],i=t;return void 0===n&&(n=a.data[e][o],i=e),void 0===n&&(n=o,i=null),n=n.replace(/\[\[(.*?)\]\]/g,function(e,o){var n,a,s=o.indexOf("|");0>s?(n=o,a=o):(n=o.slice(0,s),a=o.slice(s+1));var r="";return i&&t!=i&&(r=" hreflang='"+i+"'"),"<a href='https://"+i+".wikipedia.org/wiki/"+n.replace(/ /g,"_")+"'"+r+">"+a+"</a>"}),i&&t!=i?"<span lang='"+i+"'>"+n+"</span>":n}},a.data.en={"Binary classification":"[[Binary classification]]","model.baseline":"Baseline method","model.logreg":"[[Logistic regression]]","model.cart.prob":"[[Decision tree learning|Regression tree]]","model.cart.class":"[[Decision tree learning|Classification tree]]","model.forest":"[[Random forest]]","options.code.filename":"Input filename","options.code.postprocess":"Data postprocessing code","options.code.formula":"Formula","options.code.splitSeed":"[[Test set|Training/test set]] split seed","options.code.splitRatio":"[[Test set|Training/test set]] split ratio","options.code.splitRatio.title":"Set to 0 or 1 to avoid splitting","options.code.threshold":"Classification probability threshold","options.code.threshold.title":"Set to 0 or 1 to avoid calculating probabilities and AUCs","options.code.forestSeed":"Random forest seed","Reset options":"Reset options","comment.data":"load data","comment.postprocess":"postprocess data","comment.split":"split data into [[Test set|training/test set]]","comment.data.model":"build model","comment.data.prob":"in-sample probability prediction","comment.data.train.prob":"training set probability prediction","comment.data.test.prob":"test set probability prediction","comment.data.class":"in-sample class prediction","comment.data.train.class":"training set class prediction","comment.data.test.class":"test set class prediction","comment.data.acc":"in-sample [[Accuracy_and_precision#In_binary_classification|accuracy]]","comment.data.train.acc":"training set [[Accuracy_and_precision#In_binary_classification|accuracy]]","comment.data.test.acc":"test set [[Accuracy_and_precision#In_binary_classification|accuracy]]","comment.data.auc":"in-sample [[Receiver_operating_characteristic#Area_under_the_curve|AUC]]","comment.data.train.auc":"training set [[Receiver_operating_characteristic#Area_under_the_curve|AUC]]","comment.data.test.auc":"test set [[Receiver_operating_characteristic#Area_under_the_curve|AUC]]"},a.data.ru={"Binary classification":"Бинарная классификация","model.baseline":"Базовый метод","model.logreg":"[[Логистическая регрессия]]","model.cart.prob":"[[Дерево принятия решений|Регрессионное дерево]]","model.cart.class":"[[Дерево принятия решений|Классификационное дерево]]","model.forest":"[[Random forest|Случайный лес]]","options.code.filename":"Имя входного файла","options.code.postprocess":"Код для обработки данных","options.code.formula":"Формула","options.code.splitSeed":"Инициализация (seed) деления на обучающую/тестовую выборку","options.code.splitRatio":"Доля обучающей выборки при делении","options.code.splitRatio.title":"При значениях 0 и 1 деление выполняться не будет","options.code.threshold":"Порог на вероятность для классификации","options.code.threshold.title":"При значениях 0 и 1 вероятности и AUC&#39;и вычисляться не будут","options.code.forestSeed":"Инициализация (seed) случайного леса","Reset options":"Сбросить настройки","comment.data":"загрузка данных","comment.postprocess":"обработка данных","comment.split":"деление данных на обучающую/тестовую выборку","comment.data.model":"построение модели","comment.data.prob":"предсказание вероятностей на выборке","comment.data.train.prob":"предсказание вероятностей на обучающей выборке","comment.data.test.prob":"предсказание вероятностей на тестовой выборке","comment.data.class":"предсказание классов на выборке","comment.data.train.class":"предсказание классов на обучающей выборке","comment.data.test.class":"предсказание классов на тестовой выборке","comment.data.acc":"точность (accuracy) на выборке","comment.data.train.acc":"точность (accuracy) на обучающей выборке","comment.data.test.acc":"точность (accuracy) на тестовой выборке","comment.data.auc":"[[ROC-кривая#.D0.9F.D0.BB.D0.BE.D1.89.D0.B0.D0.B4.D1.8C_.D0.BF.D0.BE.D0.B4_.D0.BA.D1.80.D0.B8.D0.B2.D0.BE.D0.B9|AUC]] на выборке","comment.data.train.auc":"[[ROC-кривая#.D0.9F.D0.BB.D0.BE.D1.89.D0.B0.D0.B4.D1.8C_.D0.BF.D0.BE.D0.B4_.D0.BA.D1.80.D0.B8.D0.B2.D0.BE.D0.B9|AUC]] на обучающей выборке","comment.data.test.auc":"[[ROC-кривая#.D0.9F.D0.BB.D0.BE.D1.89.D0.B0.D0.B4.D1.8C_.D0.BF.D0.BE.D0.B4_.D0.BA.D1.80.D0.B8.D0.B2.D0.BE.D0.B9|AUC]] на тестовой выборке"};var s=function(t){this.options=t};s.prototype.generateCode=function(){return this.generateLines().join("\n")},s.prototype.generateLines=function(){function t(t){a=a.concat([this.comment("data.model")]),a=a.concat(n.needProb?this.generateProbModelLines(t):this.generateClassModelLines(t))}function e(t,e){var o="data.test"==e;a=n.needProb?a.concat([this.comment(e+".prob")],this.generateProbLines(t,o),[this.comment(e+".class")],this.generateClassFromProbLines(t)):a.concat([this.comment(e+".class")],this.generateClassFromModelLines(t,o)),a=a.concat([this.comment(e+".acc")],this.generateAccLines(t)),n.needProb&&(a=a.concat([this.comment(e+".auc")],this.generateAucLines(t)))}var o=this.options.encode,n=this.options.code,i=n.data,a=[];return a=a.concat(this.listLibraries().map(function(t){return"library("+t+")"}),["",this.comment("data"),o(i)+"=read.csv('"+o(n.filename)+"')"]),n.postprocess&&(a=a.concat([this.comment("postprocess"),o(n.postprocess)])),n.needSplit?(a=a.concat([this.comment("split"),"set.seed("+o(n.splitSeed)+")","split=sample.split("+o(i)+"$"+o(n.y)+",SplitRatio="+o(n.splitRatio)+")",o(i.train)+"="+o(i)+"[split,]",o(i.test)+"="+o(i)+"[!split,]"]),t.call(this,i.train),e.call(this,i.train,"data.train"),e.call(this,i.test,"data.test")):(t.call(this,i),e.call(this,i,"data")),a},s.prototype.generateClassFromProbLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t["class"])+"=+("+e(t.prob)+">="+e(o.threshold)+")"]},s.prototype.generateAccLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.acc)+"=mean("+e(t)+"$"+e(o.y)+"=="+e(t["class"])+")"]},s.prototype.generateAucLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.auc)+"=performance(","	prediction("+e(t.prob)+","+e(t)+"$"+e(o.y)+"),'auc'",")@y.values[[1]]"]},s.prototype.listLibraries=function(){return libs=[],this.options.code.needProb&&libs.push("ROCR"),this.options.code.needSplit&&libs.push("caTools"),libs},s.prototype.comment=function(t){return"# "+this.options.i18n("comment."+t)};var r=function(t){s.call(this,t)};r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.getNameId=function(){return"model.baseline"},r.prototype.generateProbModelLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.model)+"=mean("+e(t)+"$"+e(o.y)+")"]},r.prototype.generateClassModelLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.model)+"=names(sort(-table("+e(t)+"$"+e(o.y)+")))[1]"]},r.prototype.generateProbLines=function(t){{var e=this.options.encode;this.options.code}return[e(t.prob)+"=rep_len("+e(t.model)+",nrow("+e(t)+"))"]},r.prototype.generateClassFromModelLines=function(t){{var e=this.options.encode;this.options.code}return[e(t["class"])+"=rep_len("+e(t.model)+",nrow("+e(t)+"))"]};var c=function(t){s.call(this,t)};c.prototype=Object.create(s.prototype),c.prototype.constructor=c,c.prototype.getNameId=function(){return"model.logreg"},c.prototype.generateProbModelLines=c.prototype.generateClassModelLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.model)+"=glm("+e(o.formula)+",data="+e(t)+",family=binomial)"]},c.prototype.generateProbLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t.prob)+"=predict("+o(t.model)+(e?",newdata="+o(t):"")+",type='response')"]},c.prototype.generateClassFromModelLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t["class"])+"=+(predict("+o(t.model)+(e?",newdata="+o(t):"")+",type='response')>0.5)"]};var p=function(t){s.call(this,t)};p.prototype=Object.create(s.prototype),p.prototype.constructor=p,p.prototype.getNameId=function(){return this.options.code.needProb?"model.cart.prob":"model.cart.class"},p.prototype.generateProbModelLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.model)+"=rpart("+e(o.formula)+",data="+e(t)+")"]},p.prototype.generateClassModelLines=function(t){var e=this.options.encode,o=this.options.code;return[e(t.model)+"=rpart("+e(o.formula)+",data="+e(t)+",method='class')"]},p.prototype.generateProbLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t.prob)+"=predict("+o(t.model)+(e?",newdata="+o(t):"")+")"]},p.prototype.generateClassFromModelLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t["class"])+"=predict("+o(t.model)+(e?",newdata="+o(t):"")+",type='class')"]},p.prototype.listLibraries=function(){return s.prototype.listLibraries.call(this).concat(["rpart"])};var d=function(t){s.call(this,t)};d.prototype=Object.create(s.prototype),d.prototype.constructor=d,d.prototype.getNameId=function(){return"model.forest"},d.prototype.generateProbModelLines=function(t){var e=this.options.encode,o=this.options.code;return["set.seed("+e(o.forestSeed)+")",e(t.model)+"=randomForest("+e(o.formula)+",data="+e(t)+")"]},d.prototype.generateClassModelLines=function(t){var e=this.options.encode,o=this.options.code;return["set.seed("+e(o.forestSeed)+")",e(t.model)+"=randomForest(as.factor("+e(o.y)+")~"+e(o.rhs)+",data="+e(t)+")"]},d.prototype.generateProbLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t.prob)+"=predict("+o(t.model)+(e?",newdata="+o(t):"")+")"]},d.prototype.generateClassFromModelLines=function(t,e){{var o=this.options.encode;this.options.code}return[o(t["class"])+"=predict("+o(t.model)+(e?",newdata="+o(t):"")+")"]},d.prototype.listLibraries=function(){return s.prototype.listLibraries.call(this).concat(["randomForest"])};var l=0;$(".statistics-classification-binary").each(function(){function a(){s.find("table").replaceWith(o(p)),p.html.storage&&(localStorage[p.html.storage]=JSON.stringify(p.code))}var s=$(this),r={heading:"SECTION"==this.nodeName,lang:s.closest("[lang]").attr("lang"),storage:s.attr("data-storage")},c={};r.storage&&localStorage[r.storage]&&(c=JSON.parse(localStorage[r.storage]));var p=e(r,c);s.html(n(p)),s.find(".code-options [data-option]").each(function(){var e=$(this),o=i(),n=e.find(".label"),s=n.attr("title"),r=$("<label for='"+o+"'>"+n.html()+"</label>");s&&r.attr("title",s),n.replaceWith(r);var c=e.attr("data-option"),d=e.find("code"),l=d.text(),m="<input type='text' value='",u="' />";"postprocess"==c?(m="<textarea spellcheck='false'>",u="</textarea>"):"splitSeed"==c?m="<input type='number' value='":("splitRatio"==c||"threshold"==c)&&(m="<input type='number' min='0' max='1' step='any' value='"),d.replaceWith($(m+t(l)+u).attr("id",o).on("input",function(){p.code[c]=this.value,a()}))}),s.find(".code-options").append($("<div class='code-input' />").append($("<button type='button'>"+p.i18n("Reset options")+"</button>").click(function(){p.code.reset(),s.find(".code-options [data-option]").each(function(){var t=$(this),e=t.attr("data-option");t.find("input").each(function(){this.value=p.code[e]})}),a()})))})});
//# sourceMappingURL=statistics-classification-binary.js.map